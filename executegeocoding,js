require('dotenv').config();
const { getGeocode } = require('./geocoding');
const apikey =process.env.apikey;
const addresses = [
  "R. Montreal, 9 - Santa Cruz, Rio de Janeiro - RJ, 23525-020, Brazil"
]; // Lista de CEPs

async function main() {
  try {
    const geocodeData = await Promise.all(
      addresses.map(async (address) => {
        try {
          const data = await getGeocode(address,apikey);
          console.log('Endereços :', JSON.stringify(data, null, 2));

          const formatted_address = data.results[0].formatted_address;
          return { address, formatted_address };
        } catch (error) {
          console.error(`Erro ao obter dados de geocodificação para ${address}:`, error.message);
          return { address, error: error.message };
        }
      })
    );
    //console.log('Endereços formatados:', JSON.stringify(data, null, 2));
  } catch (error) {
    console.error('Erro ao processar os dados de geocodificação:', error.message);
  }
}

main();
